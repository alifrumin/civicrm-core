# CiviCRM 5.5.0

Released September 5, 2018

- **[Synopsis](#synopsis)**
- **[Features](#features)**
- **[Bugs resolved](#bugs)**
- **[Miscellany](#misc)**
- **[Credits](#credits)**
- **[Feedback](#feedback)**

## <a name="synopsis"></a>Synopsis

| *Does this version...?*                                         |         |
|:--------------------------------------------------------------- |:-------:|
| Fix security vulnerabilities?                                   |         |
| Change the database schema?                                     |         |
| Alter the API?                                                  |         |
| Require attention to configuration options?                     |         |
| Fix problems installing or upgrading to a previous version?     |         |
| Introduce features?                                             |         |
| Fix bugs?                                                       |         |

## <a name="features"></a>Features

### CiviMail, Core CiviCRM

- **[CRM-21768](https://issues.civicrm.org/jira/browse/CRM-21768) NOFOLLOW Trackable links in public online view of mailings  ([12561](https://github.com/civicrm/civicrm-core/pull/12561))**

### Core CiviCRM

- **[CRM-21574](https://issues.civicrm.org/jira/browse/CRM-21574) Allow to disable sending of email from source contact for tell a friend on pcp ([12475](https://github.com/civicrm/civicrm-core/pull/12475))**

- **[CRM-21104](https://issues.civicrm.org/jira/browse/CRM-21104) CIVICRM-410 CiviCRM Contribution pages which have no Profile associated with them do not include a ReCaptcha and as a result are prime targets for credit card fraud. ([11197](https://github.com/civicrm/civicrm-core/pull/11197))**

### CiviMail, NYSS

- **[CRM-20845](https://issues.civicrm.org/jira/browse/CRM-20845) create alterMailingRecipients hook ([10673](https://github.com/civicrm/civicrm-core/pull/10673))**

### CiviMail

- **[CRM-21425](https://issues.civicrm.org/jira/browse/CRM-21425) Make 'Inbound E-mail' Activities Editable ([12445](https://github.com/civicrm/civicrm-core/pull/12445))**

## <a name="bugs"></a>Bugs resolved

### Core CiviCRM

- **Further fix for updating custom fields linked to optiongroups. ([12729](https://github.com/civicrm/civicrm-core/pull/12729))**

- **Fix for issue editing custom fields with option groups after #12423 ([12718](https://github.com/civicrm/civicrm-core/pull/12718))**

- **Update civicrm_generated mysql file following changes to custom mysql… ([12719](https://github.com/civicrm/civicrm-core/pull/12719))**

- **Fix + Add test for exporting location types with changed names ([12671](https://github.com/civicrm/civicrm-core/pull/12671))**

- **Upgrader - When updating message templates, identify them by name ([12674](https://github.com/civicrm/civicrm-core/pull/12674))**

- **Fix quirks in upgrader UI ([12675](https://github.com/civicrm/civicrm-core/pull/12675))**

- **Refine upgrade message for `save Report Criteria` ([12670](https://github.com/civicrm/civicrm-core/pull/12670))**

- **Test fix for intermittant error ([12673](https://github.com/civicrm/civicrm-core/pull/12673))**

- **dev/core/#273 Fix issue where sending an SMS with the To Field in the… ([12654](https://github.com/civicrm/civicrm-core/pull/12654))**

- **(dev/core#316) Fix crash on Memcache systems when session key involves whitespace ([12653](https://github.com/civicrm/civicrm-core/pull/12653))**

- **Update release-notes and version for 5.4.1 ([12655](https://github.com/civicrm/civicrm-core/pull/12655))**

- **dev/core/#273 Fix issue where sending an SMS with the To Field in the… ([12634](https://github.com/civicrm/civicrm-core/pull/12634))**

- **Fix option group caching issue. ([12649](https://github.com/civicrm/civicrm-core/pull/12649))**

- **Fix option group caching issue. ([12646](https://github.com/civicrm/civicrm-core/pull/12646))**

- **(dev/core#316) Fix crash on Memcache systems when session key involves whitespace ([12640](https://github.com/civicrm/civicrm-core/pull/12640))**

- **Test fix, update activity report adds a this.month filter by default, accomodate ([12616](https://github.com/civicrm/civicrm-core/pull/12616))**

- **dev/core#289 - Fix links on case dashboard ([12607](https://github.com/civicrm/civicrm-core/pull/12607))**

- **dev/core/issues/277 Sort recurring contributions by newest first ([12610](https://github.com/civicrm/civicrm-core/pull/12610))**

- **Customvalue ID is ignored ([12606](https://github.com/civicrm/civicrm-core/pull/12606))**

- **(dev/core#217) PrevNext - Allow swapping getPositions (etal) for contact-search ([12558](https://github.com/civicrm/civicrm-core/pull/12558))**

- **Export - add tests out header output, move phone_type_id to metadata ([12587](https://github.com/civicrm/civicrm-core/pull/12587))**

- **Stdise references to BAO_Query->_fields [nfc] ([12585](https://github.com/civicrm/civicrm-core/pull/12585))**

- **dev/core/issues/277, Fixed count to include only live recurring contr… ([12553](https://github.com/civicrm/civicrm-core/pull/12553))**

- **NFC - Deprecate duplicate function ([12602](https://github.com/civicrm/civicrm-core/pull/12602))**

- **api - CustomValue::get - add handling for comma separated return fields ([12604](https://github.com/civicrm/civicrm-core/pull/12604))**

- **[NFC] Export - don't pass arrays as reference when they are not changed ([12596](https://github.com/civicrm/civicrm-core/pull/12596))**

- **Towards using EntityForm.tpl for Membership type & enabling custom data ([12591](https://github.com/civicrm/civicrm-core/pull/12591))**

- **Skip check for format method when there is no valid geocoding provider ([12600](https://github.com/civicrm/civicrm-core/pull/12600))**

- **Export Add unit test + minor refactor covering specifiable payment output fields for participant export. ([12535](https://github.com/civicrm/civicrm-core/pull/12535))**

- **5.4 to master ([12592](https://github.com/civicrm/civicrm-core/pull/12592))**

- **dev/core#291 Allow for field size to be set for password fields ([12589](https://github.com/civicrm/civicrm-core/pull/12589))**

- **(NFC) Update readme to link to GitLab instead of JIRA ([12578](https://github.com/civicrm/civicrm-core/pull/12578))**

- **Export clean up sql columns ([12577](https://github.com/civicrm/civicrm-core/pull/12577))**

- **crmRouteBinder - Don't convert arrays to objects ([12530](https://github.com/civicrm/civicrm-core/pull/12530))**

- **Added code to throw exception on getvalue api call ([12573](https://github.com/civicrm/civicrm-core/pull/12573))**

- **dev/financial/issues/24, Moved code from form layer to BAO and used api instead of BAO function ([12388](https://github.com/civicrm/civicrm-core/pull/12388))**

- **dev/core/issues/232, Some smart groups and some searches not returning any contacts ([12416](https://github.com/civicrm/civicrm-core/pull/12416))**

- **(dev/core#217) PrevNext - Migrate selection methods ([12556](https://github.com/civicrm/civicrm-core/pull/12556))**

- **Add 5.3.2 release notes (#12570) ([12571](https://github.com/civicrm/civicrm-core/pull/12571))**

- **5.4 ([12569](https://github.com/civicrm/civicrm-core/pull/12569))**

- **Entity form : Establish methodology to allow default values to be passed in on the url ([12185](https://github.com/civicrm/civicrm-core/pull/12185))**

- **dev/core#278 Fix DB syntax error when try to search deleted cases ([12560](https://github.com/civicrm/civicrm-core/pull/12560))**

- **dev/core#210: Regex filter broken in Search Builder ([12364](https://github.com/civicrm/civicrm-core/pull/12364))**

- **(dev/core#217) PrevNext - Probe for best available implementation (memory-backed or SQL-backed) ([12543](https://github.com/civicrm/civicrm-core/pull/12543))**

- **5.4 to master ([12555](https://github.com/civicrm/civicrm-core/pull/12555))**

- **Event Info: show waitinglist statusline only when registration is open ([11949](https://github.com/civicrm/civicrm-core/pull/11949))**

- **dev/core#244 Allow use of custom fields of type select without specifying an optiongroup ([12440](https://github.com/civicrm/civicrm-core/pull/12440))**

- **dev/core#111 Support Custom Data for MembershipType entity ([12439](https://github.com/civicrm/civicrm-core/pull/12439))**

- **Move relationship return properties to the processor class to fix leakage related test fail ([12521](https://github.com/civicrm/civicrm-core/pull/12521))**

- **(dev/core#217) CRM_Utils_Cache_Redis::connect() - Allow pooling connections ([12544](https://github.com/civicrm/civicrm-core/pull/12544))**

- **(dev/core#217) PrevNext - Define and use fillWithSql()/fillWithArray() ([12545](https://github.com/civicrm/civicrm-core/pull/12545))**

- **Reduce config required to use Redis. ([12546](https://github.com/civicrm/civicrm-core/pull/12546))**

- **dev/core#219 Improve consistency displaying "Test Transactions" ([12385](https://github.com/civicrm/civicrm-core/pull/12385))**

- **Theme layer Fix search for Shoreditch compatibility ([12536](https://github.com/civicrm/civicrm-core/pull/12536))**

- **5.4 ([12549](https://github.com/civicrm/civicrm-core/pull/12549))**

- **Expose UI support for custom fields on financial types ([12501](https://github.com/civicrm/civicrm-core/pull/12501))**

- **Update navigation menu items to use FontAwesome ([12541](https://github.com/civicrm/civicrm-core/pull/12541))**

- **dev/core#242 Fix display of premiums on contribution page ([12437](https://github.com/civicrm/civicrm-core/pull/12437))**

- **dev/financial#27 Paypal_Standard recurring IPNs don't work ([12387](https://github.com/civicrm/civicrm-core/pull/12387))**

- **Link to option group page from option group menu item ([12540](https://github.com/civicrm/civicrm-core/pull/12540))**

- **(NFC) Remove deprecated recursive array utils ([12539](https://github.com/civicrm/civicrm-core/pull/12539))**

- **dev/core#259 OptionGroup Admin UI workflow improvements ([12473](https://github.com/civicrm/civicrm-core/pull/12473))**

- **(NFC) Deprecate redundant array util function ([12529](https://github.com/civicrm/civicrm-core/pull/12529))**

- **5.4 to master ([12534](https://github.com/civicrm/civicrm-core/pull/12534))**

- **Icons in colored boxes for relationship permissions ([12526](https://github.com/civicrm/civicrm-core/pull/12526))**

- **(dev/core#217) Add skeletal PrevNextCache service ([12528](https://github.com/civicrm/civicrm-core/pull/12528))**

- **Extract code for getting additional return properties, test ([12505](https://github.com/civicrm/civicrm-core/pull/12505))**

- **Fix signature on BAO_Product::add to make ids optional ([12523](https://github.com/civicrm/civicrm-core/pull/12523))**

- **Shoreditch support: Fix following change in core that resulted in visual regression in shoreditch in advanced search ([12524](https://github.com/civicrm/civicrm-core/pull/12524))**

- **Export : Add a lot of unit tests. Fix an enotice ([12518](https://github.com/civicrm/civicrm-core/pull/12518))**

- **dev/accessiblity#3 Add aria-label to form elements of contribution page which don't have accessible labels ([12207](https://github.com/civicrm/civicrm-core/pull/12207))**

- **5.4 ([12520](https://github.com/civicrm/civicrm-core/pull/12520))**

- **Fix regression on case export from recent export fix ([12517](https://github.com/civicrm/civicrm-core/pull/12517))**

- **5.4 to master ([12515](https://github.com/civicrm/civicrm-core/pull/12515))**

- **Remove LOWER from street_address search, rely on mysql to handle. ([12503](https://github.com/civicrm/civicrm-core/pull/12503))**

- **Respect '0' as a default when generating DAOs ([12483](https://github.com/civicrm/civicrm-core/pull/12483))**

- **Merge 5.4 to master ([12511](https://github.com/civicrm/civicrm-core/pull/12511))**

- **Allow Drupal 8 vendor folder outside webroot ([12499](https://github.com/civicrm/civicrm-core/pull/12499))**

- **5.4 to master ([12508](https://github.com/civicrm/civicrm-core/pull/12508))**

- **Export cleanup Extract bulk of the transformation for each field to its own function ([12469](https://github.com/civicrm/civicrm-core/pull/12469))**

- **dev/core/#/233 Expose information about where a contact has been merged to ([12489](https://github.com/civicrm/civicrm-core/pull/12489))**

- **Fix enotice in test ([12507](https://github.com/civicrm/civicrm-core/pull/12507))**

- **dev/financial/issues/28, Financial Account cannot be change to non de… ([12500](https://github.com/civicrm/civicrm-core/pull/12500))**

- **dev/core#34 Add permission details in `title` attribute of icons ([12487](https://github.com/civicrm/civicrm-core/pull/12487))**

- **Test fix, use separate emails so distinct doesn't meld them ([12490](https://github.com/civicrm/civicrm-core/pull/12490))**

- **Export cleanup - pass processor object rather than the query object ([12485](https://github.com/civicrm/civicrm-core/pull/12485))**

- **Minor refactor preparatory to function extraction ([12468](https://github.com/civicrm/civicrm-core/pull/12468))**

- **NFC cleanup to financial classes ([12482](https://github.com/civicrm/civicrm-core/pull/12482))**

- **dev/core#150 : Chain select for country/state in Search Builder does not stay within OR groupings ([12230](https://github.com/civicrm/civicrm-core/pull/12230))**

- **dev/core#230 : set mapping id null on delete action ([12486](https://github.com/civicrm/civicrm-core/pull/12486))**

- **core-34 Add view-only option on permissioned relationships ([12415](https://github.com/civicrm/civicrm-core/pull/12415))**

- **Cleanup redundant array functions ([12452](https://github.com/civicrm/civicrm-core/pull/12452))**

- **Fix false negatives in checkResourceUrl() ([12460](https://github.com/civicrm/civicrm-core/pull/12460))**

- **Export code tidy up Use queryFields rather than query. Look to stop passing around query. ([12484](https://github.com/civicrm/civicrm-core/pull/12484))**

- **Export class code cleanup Start building export processor class. ([12479](https://github.com/civicrm/civicrm-core/pull/12479))**

- **Fix activity report to bring it under standardised report testing ([12453](https://github.com/civicrm/civicrm-core/pull/12453))**

- **dev/core#155 Fix optiongroup is_reserved data and use when selecting option group for custom fields ([12423](https://github.com/civicrm/civicrm-core/pull/12423))**

- **Rename CRM_Contribute_BAO_ManagePremiums to CRM_Contribute_BAO_Product and deprecate CRM_Contribute_BAO_ManagePremiums ([12474](https://github.com/civicrm/civicrm-core/pull/12474))**

- **dev/core#188: Fix Floating Point Precision Comparison Exception ([12352](https://github.com/civicrm/civicrm-core/pull/12352))**

- **Only auto-renew membership when contribution status is completed ([12315](https://github.com/civicrm/civicrm-core/pull/12315))**

- **(NFC) Update comment on membership type domain_id API Test ([12477](https://github.com/civicrm/civicrm-core/pull/12477))**

- **(NFC) Regenerate OptionGroup DAO file ([12478](https://github.com/civicrm/civicrm-core/pull/12478))**

- **BAO_Navigation: Respect domain_id param ([12476](https://github.com/civicrm/civicrm-core/pull/12476))**

- **Disable inline-edit of multi-record custom fields in profiles ([12312](https://github.com/civicrm/civicrm-core/pull/12312))**

- **Make domain_id optional in membership_type api. ([12461](https://github.com/civicrm/civicrm-core/pull/12461))**

- **Remove unused variables & comment cleanup  ([12472](https://github.com/civicrm/civicrm-core/pull/12472))**

- **Fixed #141: only check if name exists. ([12464](https://github.com/civicrm/civicrm-core/pull/12464))**

- **dev/core#256 - use unsigned int for temporary recipient ids ([12465](https://github.com/civicrm/civicrm-core/pull/12465))**

- **Non functional changes towards shared functions in Core_Form_Task ([12320](https://github.com/civicrm/civicrm-core/pull/12320))**

- **Export class code readability - Reduce passing of variable, define on class  ([12290](https://github.com/civicrm/civicrm-core/pull/12290))**

- **(NFC) Ignore generated karma.cv.js file ([12462](https://github.com/civicrm/civicrm-core/pull/12462))**

- **Issue #93 Update CRM_Utils_Rule::mysqlOrderBy() to accommodate more than 2 joins ([12456](https://github.com/civicrm/civicrm-core/pull/12456))**

- **CiviMail: Fix logic for handling SMTP socket errors, temporary failures and permanent failures ([11838](https://github.com/civicrm/civicrm-core/pull/11838))**

- **dev/mail/15 deal better with spaces in from email address ([12346](https://github.com/civicrm/civicrm-core/pull/12346))**

- **CustomValue gettree api - More accurate permission check ([12449](https://github.com/civicrm/civicrm-core/pull/12449))**

- **dev/core#241 Fix Manage Premiums UI ([12436](https://github.com/civicrm/civicrm-core/pull/12436))**

- **(dev/core#255) Changes to copied event location reflects in original … ([12459](https://github.com/civicrm/civicrm-core/pull/12459))**

- **PriceField: show pre/post help if not empty, not if isset. ([12458](https://github.com/civicrm/civicrm-core/pull/12458))**

- **Deprecate  array on ManagePremiums ([12451](https://github.com/civicrm/civicrm-core/pull/12451))**

- **[NFC] Comment fixes ([12450](https://github.com/civicrm/civicrm-core/pull/12450))**

- **dev/core#221, check if the grouptree is not empty ([12392](https://github.com/civicrm/civicrm-core/pull/12392))**

- **5.4 ([12448](https://github.com/civicrm/civicrm-core/pull/12448))**

- **dev/core/issues/228 fix OptionGroup create action to not disable on update ([12410](https://github.com/civicrm/civicrm-core/pull/12410))**

- **dev/accessibility#3: Add accessible label on Contact Edit form elements and helpicon ([12373](https://github.com/civicrm/civicrm-core/pull/12373))**

- **dev/core#218 : On Case Type listing page, for reserved ones the, 'More' link don't show any options ([12384](https://github.com/civicrm/civicrm-core/pull/12384))**

- **Remove old deprecated crmeditable.tpl ([12442](https://github.com/civicrm/civicrm-core/pull/12442))**

- **Fix potential undefined array index ([12443](https://github.com/civicrm/civicrm-core/pull/12443))**

- **(dev/core#217) CRM_Contact_Selector::getRows() - Use generator instead of DAO loop ([12438](https://github.com/civicrm/civicrm-core/pull/12438))**

- **Implement CRM_Utils_SQL_Delete ([12441](https://github.com/civicrm/civicrm-core/pull/12441))**

- **dev/core#239 : Fix title dialog box on hovering form element on Event's configuration backend form ([12430](https://github.com/civicrm/civicrm-core/pull/12430))**

- **dev/core#176 Odd / Even street number sort column missing from Reports ([12422](https://github.com/civicrm/civicrm-core/pull/12422))**

- **[NFC] Update comment link ([12429](https://github.com/civicrm/civicrm-core/pull/12429))**

- **(dev/core#174) CRM_Utils_Cache_SqlGroup - Refine trivial TTL handling to stabilize tests ([12427](https://github.com/civicrm/civicrm-core/pull/12427))**

- **5.4 ([12428](https://github.com/civicrm/civicrm-core/pull/12428))**

- **Enable syntaxConformance on entities that now succeed ([12412](https://github.com/civicrm/civicrm-core/pull/12412))**

- **dev/core#212 - Contribution Details report fails when 'Is not one of'… ([12406](https://github.com/civicrm/civicrm-core/pull/12406))**

- **Simplify input params on OptionValue::addOptionValue ([12414](https://github.com/civicrm/civicrm-core/pull/12414))**

- **CRM_Core_BAO_PrevNextCache - Remove unused buildSelectedContactPager() ([12418](https://github.com/civicrm/civicrm-core/pull/12418))**

- **Fix Views custom field handler not displaying select value labels when fields share the same label. ([532](https://github.com/civicrm/civicrm-drupal/pull/532))**

- **dev/core#292 Fix issue where accented characters were not properly ut… ([225](https://github.com/civicrm/civicrm-packages/pull/225))**

- **Menubar - use icon font instead of image ([223](https://github.com/civicrm/civicrm-packages/pull/223))**

- **(NFC) Remove deprecated function use ([221](https://github.com/civicrm/civicrm-packages/pull/221))**

- **5.4 to master ([219](https://github.com/civicrm/civicrm-packages/pull/219))**

- **Issue 243: Authenticate with Backdrop in kcfinder ([216](https://github.com/civicrm/civicrm-packages/pull/216))**

### NYSS

- **[CRM-21754](https://issues.civicrm.org/jira/browse/CRM-21754) Duplicate rows in Activity Details report when address fields are displayed  ([11660](https://github.com/civicrm/civicrm-core/pull/11660))**

### WordPress Integration

- **[CRM-21812](https://issues.civicrm.org/jira/browse/CRM-21812) WordPress install variable causes conflict with some WP plugins ([125](https://github.com/civicrm/civicrm-wordpress/pull/125))**

## <a name="misc"></a>Miscellany

## <a name="credits"></a>Credits

This release was developed by the following code authors:

AGH Strategies - Andrew Hunt; Agileware - Alok Patel; Australian Greens - Seamus Lee; Caltha - Tomasz Pietrzkowski; Chris Burgess; CiviCoop - Jaap Jansma; CiviCRM - Coleman Watts, Tim Otten; CiviDesk - Sunil Pawar, Yashodha Chaku; CompuCorp - Camilo Rodriguez, Mukesh Ram; Coop SymbioTIC - Mathieu Lutfy; Electronic Frontier Foundation - Mark Burdett; eQuality Technology - Greg Rundlett; Freeform Solutions - Herb van den Dool; Fuzion - Jitendra Purohit; JMA Consulting - Monish Deb; John Kingsnorth; Left Join Labs - Sean Madsen; madhavimalgaonkar; Megaphone Technology Consulting - Jon Goldberg; MJW Consulting - Matthew Wire; Oxfam Germany - Thomas Schüttler; Pradeep Nayak; Progressive Technology Project - Jamie McClelland; Richard van Oosterhout; Romain Thouvenin; Squiffle Consulting - Aidan Saunders; Tadpole Collective - Kevin Cristiano; Third Sector Design - Michael McAndrew; wannesderoy; Wikimedia Foundation - Eileen McNaughton

Most authors also reviewed code for this release; in addition, the following
reviewers contributed their comments:

AGH Strategies - Alice Frumin, Andrew Hunt; Agileware - Agileware Team; Andrew Cormick-Dockery; Australian Greens - Seamus Lee; bluegreenbay; bmango; CEDC - Laryn Kragt Bakker; chamilwijesooriya; Chris Burgess; Christian Wach; Circle Interactive - Dave Jenkins; civibot[bot]; civicrm-builder; CiviCRM - Coleman Watts, Tim Otten; CiviDesk - Yashodha Chaku; CompuCorp - Camilo Rodriguez; Coop SymbioTIC - Mathieu Lutfy; Electronic Frontier Foundation - Mark Burdett; Francesc Bassas i Bullich; Freeform Solutions - Herb van den Dool; Fuzion - Peter Davis; Greenleaf Advancement - Karen Stevenson; JMA Consulting - Monish Deb; jmcheung; John Kingsnorth; laurynnlowe; Lemniscus - Noah Miller; Lighthouse Design and Consulting - Brian Shaughnessy; marsh-circle; Megaphone Technology Consulting - Jon Goldberg; MJW Consulting - Matthew Wire; myDropWizard - David Snopek; Oxfam Germany - Thomas Schüttler; Pradeep Nayak; Progressive Technology Project - Jamie McClelland; Richard van Oosterhout; Semper IT - Karin Gerritsen; Squiffle Consulting - Aidan Saunders; stesi561; Tadpole Collective - Kevin Cristiano; tanyabouman; Third Sector Design - Michael McAndrew; wannesderoy; Wikimedia Foundation - Eileen McNaughton

## <a name="feedback"></a>Feedback

These release notes are edited by Alice Frumin and Andrew Hunt.  If you'd like to provide
feedback on them, please log in to https://chat.civicrm.org/civicrm and contact
`@agh1`.
