# CiviCRM 5.14.0

Released June 5, 2019

- **[Synopsis](#synopsis)**
- **[Features](#features)**
- **[Bugs resolved](#bugs)**
- **[Miscellany](#misc)**
- **[Credits](#credits)**
- **[Feedback](#feedback)**

## <a name="synopsis"></a>Synopsis

| *Does this version...?*                                         |         |
|:--------------------------------------------------------------- |:-------:|
| Fix security vulnerabilities?                                   |         |
| Change the database schema?                                     |         |
| Alter the API?                                                  |         |
| Require attention to configuration options?                     |         |
| Fix problems installing or upgrading to a previous version?     |         |
| Introduce features?                                             |         |
| Fix bugs?                                                       |         |

## <a name="features"></a>Features

### Core CiviCRM

- **CRM-20006 Missing Summary ([507](https://github.com/civicrm/civicrm-drupal/pull/507))**

## <a name="bugs"></a>Bugs resolved

### Core CiviCRM

- **(dev/core#940) Fix regression involving Email Processor filing and ".unknown" attachments ([14208](https://github.com/civicrm/civicrm-core/pull/14208))**

- **(dev/core#934; followup) Fix escaping on new query code ([14204](https://github.com/civicrm/civicrm-core/pull/14204))**

- **dev/core#934 Fix regression on sorting activity tab by 'Added by' ([14194](https://github.com/civicrm/civicrm-core/pull/14194))**

- **On PHP 7.2 we cannot start session until it has been configured by Dr… ([14193](https://github.com/civicrm/civicrm-core/pull/14193))**

- **Hook to alter menubar css variables & fix breakpoint in WP ([14135](https://github.com/civicrm/civicrm-core/pull/14135))**

- **wordpress#26 - fix REST ([14189](https://github.com/civicrm/civicrm-core/pull/14189))**

- **Resolve dev/core#931 by not doing translation on the query if field e… ([14188](https://github.com/civicrm/civicrm-core/pull/14188))**

- **Event Cart: pass the contactID to fix payment on Stripe ([14173](https://github.com/civicrm/civicrm-core/pull/14173))**

- **Event Cart: fix sending of email receipts ([14170](https://github.com/civicrm/civicrm-core/pull/14170))**

- **Event Cart: add support for the Credit Card type icons ([14175](https://github.com/civicrm/civicrm-core/pull/14175))**

- **Event Cart: honor the allow_same_participant_emails setting ([14174](https://github.com/civicrm/civicrm-core/pull/14174))**

- **Event Cart: fix start_date formatting in line items during checkout ([14169](https://github.com/civicrm/civicrm-core/pull/14169))**

- **dev/core#918 enotice fix part 2 #14165 ([14168](https://github.com/civicrm/civicrm-core/pull/14168))**

- **dev/core#818 Partial conversion of Group form to be an EntityForm ([13887](https://github.com/civicrm/civicrm-core/pull/13887))**

- **dev/core#918 Enotice fix ([14165](https://github.com/civicrm/civicrm-core/pull/14165))**

- **Convert dedupe select to select 2 and remove not-used var ([14161](https://github.com/civicrm/civicrm-core/pull/14161))**

- **dev/core#338: Batch update membership type ([14064](https://github.com/civicrm/civicrm-core/pull/14064))**

- **dev/core#723 [REF] extract chunk of code that definitely does something. ([14144](https://github.com/civicrm/civicrm-core/pull/14144))**

- **dev/core#561 Remove last free jcalendar ([14150](https://github.com/civicrm/civicrm-core/pull/14150))**

- **dev/core#830 [REF] Add unit tests on contribution recur trxn_id, contribution recur processor id ([14119](https://github.com/civicrm/civicrm-core/pull/14119))**

- **dev/core#723 [REF] Declare contactType var rather than using long array syntax. ([14146](https://github.com/civicrm/civicrm-core/pull/14146))**

- **dev/core#248 - Fixes advanced search mailings results headers ([14134](https://github.com/civicrm/civicrm-core/pull/14134))**

- **dev/core#560 Remove a couple of instances of fatal errors in favour of throwing exceptions ([14143](https://github.com/civicrm/civicrm-core/pull/14143))**

- **Fixed double protocol being added in link by CKEditor. ([14128](https://github.com/civicrm/civicrm-core/pull/14128))**

- **dev/core#832 CiviCase: rebuild case activity views during upgrade ([14139](https://github.com/civicrm/civicrm-core/pull/14139))**

- **Case activity query performs poorly on large databases ([14086](https://github.com/civicrm/civicrm-core/pull/14086))**

- **Call Payment.create from payment.cancel ([13689](https://github.com/civicrm/civicrm-core/pull/13689))**

- **Add function filterLinks to return an array of links for an entity that can be used by the API / form layer to generate a link ([14112](https://github.com/civicrm/civicrm-core/pull/14112))**

- **dev/core#880: Fix typo in DROP table query. ([14123](https://github.com/civicrm/civicrm-core/pull/14123))**

- **Fix import primary phone, primary email, add tests ([14043](https://github.com/civicrm/civicrm-core/pull/14043))**

- **dev/core#846 Convert Recurring forms to entity forms ([13994](https://github.com/civicrm/civicrm-core/pull/13994))**

- **dev/core#553: Creating new event takes value from default value not from saved template for custom fields ([14063](https://github.com/civicrm/civicrm-core/pull/14063))**

- **Fix ts() usage in CRM_SMS_Form_Schedule ([14111](https://github.com/civicrm/civicrm-core/pull/14111))**

- **Convert Pledge Calander Date and Start Date for pledges to use datepic… ([14099](https://github.com/civicrm/civicrm-core/pull/14099))**

- **Fix bug preventing affecting `cv --user` on Joomla ([13890](https://github.com/civicrm/civicrm-core/pull/13890))**

- **Add serialize metadata to tag used_for field ([14096](https://github.com/civicrm/civicrm-core/pull/14096))**

- **membership#9 - show user a notification on back-office renewals ([14088](https://github.com/civicrm/civicrm-core/pull/14088))**

- **dev/core#881 Add in unit test demonstrating issue Stoob found with is… ([14073](https://github.com/civicrm/civicrm-core/pull/14073))**

- **Fix upgrade message db setting location ([14083](https://github.com/civicrm/civicrm-core/pull/14083))**

- **(dev/core#876) Allow url to set IS NULL/ NOT NULL in report for opera… ([14052](https://github.com/civicrm/civicrm-core/pull/14052))**

- **change is_override logic ([14059](https://github.com/civicrm/civicrm-core/pull/14059))**

- **Fixed auto populate of contact refrence field on membership signup form ([14077](https://github.com/civicrm/civicrm-core/pull/14077))**

- **Cron Status Check - Better hyperlinks ([14085](https://github.com/civicrm/civicrm-core/pull/14085))**

- **fix getAddressColumns() to respect tableAlias ([14014](https://github.com/civicrm/civicrm-core/pull/14014))**

- **Update mastercard icon to match branding guidelines ([14078](https://github.com/civicrm/civicrm-core/pull/14078))**

- **Drupal#56 - fix quicksearch text color on D8 ([14080](https://github.com/civicrm/civicrm-core/pull/14080))**

- **dev/core#562 Remove remaining free() instances from tests ([14070](https://github.com/civicrm/civicrm-core/pull/14070))**

- **Make DAO fields more consistent ([14072](https://github.com/civicrm/civicrm-core/pull/14072))**

- **dev/core#562 Remove more DAO->free() calls ([14071](https://github.com/civicrm/civicrm-core/pull/14071))**

- **Ensure edit tooltip is always initially hidden in contact summary block ([14065](https://github.com/civicrm/civicrm-core/pull/14065))**

- **Skip adding core resources when building assets ([14010](https://github.com/civicrm/civicrm-core/pull/14010))**

- **Switch to using ContributionRecur.cancel api from CancelSubscription form ([14033](https://github.com/civicrm/civicrm-core/pull/14033))**

- **Make hook_civicrm_pre() and hook_civicrm_post() fire on CaseContacts ([14030](https://github.com/civicrm/civicrm-core/pull/14030))**

- **dev/core#846 Rationalise loading of payment processor across the 3 update forms ([13993](https://github.com/civicrm/civicrm-core/pull/13993))**

- **Create contribution before taking payment, per contribution page workflow ([13837](https://github.com/civicrm/civicrm-core/pull/13837))**

- **(dev/core#873) civi.api.prepare - Allow dynamic wrappers ([14047](https://github.com/civicrm/civicrm-core/pull/14047))**

- **(REF; dev/core#873) CiviUnitTestCase - Extract traits to facilitate extension testing ([14044](https://github.com/civicrm/civicrm-core/pull/14044))**

- **Add pseudoconstant to UFField dao ([14041](https://github.com/civicrm/civicrm-core/pull/14041))**

- **(dev/core#865) Result filter criteria doesn't show IS NULL/IS NOT NUL… ([14028](https://github.com/civicrm/civicrm-core/pull/14028))**

- **dev/core#562 - Remove dao->free from api ([14037](https://github.com/civicrm/civicrm-core/pull/14037))**

- **dev/core#859 - Dedupe fails on address field in 5.12 ([14034](https://github.com/civicrm/civicrm-core/pull/14034))**

- **Bump php version to match core requirements ([567](https://github.com/civicrm/civicrm-drupal/pull/567))**

- **Enable contribution views to filter on empty Receipt and Thank You dates ([573](https://github.com/civicrm/civicrm-drupal/pull/573))**

- **Don't render an empty mailto link for empty email addresses ([540](https://github.com/civicrm/civicrm-drupal/pull/540))**

- **Issue 48: make it next_sched_contribution_date ([578](https://github.com/civicrm/civicrm-drupal/pull/578))**


## <a name="misc"></a>Miscellany

- **(NFC) Add tests of retreiving notes for display on a contact record a…
  ([14094](https://github.com/civicrm/civicrm-core/pull/14094))**

- **(NFC) Update CRM/Contact to match new coder style
  ([14022](https://github.com/civicrm/civicrm-core/pull/14022))**

- **(NFC) Minor code style fixes
  ([14015](https://github.com/civicrm/civicrm-core/pull/14015))**

- **(NFC) Add in unit test checking that E2E test returns sensible contac…
  ([14076](https://github.com/civicrm/civicrm-core/pull/14076))**

- **NFC Whitespace formatting for formButtons.tpl
  ([14107](https://github.com/civicrm/civicrm-core/pull/14107))**

- **(NFC) Expand unit test to show off double protocol error
  ([14141](https://github.com/civicrm/civicrm-core/pull/14141))**

- ** [REF] move gathering of location info to relevant function (towards
  dev/core#723) ([14142](https://github.com/civicrm/civicrm-core/pull/14142))**

- **[REF] Move the qfbug handling to it's own function (towards dev/core#723)
  ([14140](https://github.com/civicrm/civicrm-core/pull/14140))**

- **[REF] Use events for CMS resource loading
  ([14131](https://github.com/civicrm/civicrm-core/pull/14131))**

- **[REF] extract getConflicts function
  ([14148](https://github.com/civicrm/civicrm-core/pull/14148))**

- **[REF] Extract get cfields function
  ([14151](https://github.com/civicrm/civicrm-core/pull/14151))**

- **[REF] Use variable for menubar height
  ([14122](https://github.com/civicrm/civicrm-core/pull/14122))**

- **[REF] Clean up CRM_Contribute_Form_SearchTest
  ([14068](https://github.com/civicrm/civicrm-core/pull/14068))**

- **[REF] Extract formatLocationBlock from import parsing
  ([14040](https://github.com/civicrm/civicrm-core/pull/14040))**

- **[REF] function extraction in dedupe code
  ([14157](https://github.com/civicrm/civicrm-core/pull/14157))**

- **[REF] cleanup input parameters on extracted function
  ([14050](https://github.com/civicrm/civicrm-core/pull/14050))**

- **(REF) Fix accepted params in CustomValueTable::setValues
  ([14079](https://github.com/civicrm/civicrm-core/pull/14079))**

- **(REF) Fix unnecessary required param in contact BAO update
  ([14075](https://github.com/civicrm/civicrm-core/pull/14075))**

- **(REF) Reduce redundant code in CRM_Utils_Type::validate
  ([14011](https://github.com/civicrm/civicrm-core/pull/14011))**

- **REF Replace hardcoded IDs with pseudoconstants in activity form
  ([14108](https://github.com/civicrm/civicrm-core/pull/14108))**

- **(REF) Standardize UFField create function
  ([14084](https://github.com/civicrm/civicrm-core/pull/14084))**

- ** [REF] calll formatLocationBlock from parent function.
  ([14105](https://github.com/civicrm/civicrm-core/pull/14105))**

- **(REF; dev/core#873) MailingAB - Migrate "copy winner" logic from JS to PHP
  ([14045](https://github.com/civicrm/civicrm-core/pull/14045))**

- **REF Don't pass activity object to addCaseActivityLinks
  ([14110](https://github.com/civicrm/civicrm-core/pull/14110))**

- **REF Use shared function to check inbound email permissions
  ([14109](https://github.com/civicrm/civicrm-core/pull/14109))**

- **[REF] Follow up tidy up on import fixes
  ([14117](https://github.com/civicrm/civicrm-core/pull/14117))**

- **Readability cleanup on EventIncome report (towards bringing it under
  testing) ([13963](https://github.com/civicrm/civicrm-core/pull/13963))**

- **Remove deprecated function
  ([14039](https://github.com/civicrm/civicrm-core/pull/14039))**

- **Revert "dev/core#553: Creating new event takes value from default value not
  from saved template for custom fields"
  ([14121](https://github.com/civicrm/civicrm-core/pull/14121))**

- **Update docblock for doPayment function
  ([13844](https://github.com/civicrm/civicrm-core/pull/13844))**

- **[cleanup] remove CRM_Report_Form_Extended
  ([14149](https://github.com/civicrm/civicrm-core/pull/14149))**

## <a name="credits"></a>Credits

This release was developed by the following code authors:

AGH Strategies - Alice Frumin, Andrew Hunt; Agileware - Alok Patel; Australian Greens - Seamus Lee; Christian Wach; CiviCRM - Coleman Watts, Tim Otten; CiviDesk - Yashodha Chaku; Coop SymbioTIC - Mathieu Lutfy; Dave D; Electronic Frontier Foundation - Mark Burdett; Freeform Solutions - Herb van den Dool; Fuzion - Luke Stewart; grischard; JMA Consulting - Monish Deb; John Kingsnorth; Korlon - Stuart Gaston; Lighthouse Design and Consulting - Brian Shaughnessy; Megaphone Technology Consulting - Jon Goldberg; MJW Consulting - Matthew Wire; Pradeep Nayak; Squiffle Consulting - Aidan Saunders; Tadpole Collective - Kevin Cristiano; Wikimedia Foundation - Eileen McNaughton

Most authors also reviewed code for this release; in addition, the following
reviewers contributed their comments:

AGH Strategies - Andrew Hunt; Australian Greens - Seamus Lee; civibot[bot]; civicrm-builder; CiviCRM - Coleman Watts, Tim Otten; CiviDesk - Yashodha Chaku; Coop SymbioTIC - Mathieu Lutfy; Dave D; DevApp - Adam Kwiatkowski; Fuzion - Jitendra Purohit, Luke Stewart; JMA Consulting - Joe Murray, Monish Deb; Korlon - Stuart Gaston; Lighthouse Design and Consulting - Brian Shaughnessy; Megaphone Technology Consulting - Jon Goldberg; MJW Consulting - Matthew Wire; Nicol Wistreich; Pradeep Nayak; scoobird; Skvare - Mark Hanna; Squiffle Consulting - Aidan Saunders; Tadpole Collective - Kevin Cristiano; tapashdatta; Wikimedia Foundation - Eileen McNaughton

## <a name="feedback"></a>Feedback

These release notes are edited by Alice Frumin and Andrew Hunt.  If you'd like
to provide feedback on them, please log in to https://chat.civicrm.org/civicrm
and contact `@agh1`.
