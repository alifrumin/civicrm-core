# CiviCRM 5.11.0

Released March 6, 2019

- **[Synopsis](#synopsis)**
- **[Features](#features)**
- **[Bugs resolved](#bugs)**
- **[Miscellany](#misc)**
- **[Credits](#credits)**
- **[Feedback](#feedback)**

## <a name="synopsis"></a>Synopsis

| *Does this version...?*                                         |         |
|:--------------------------------------------------------------- |:-------:|
| Fix security vulnerabilities?                                   |         |
| Change the database schema?                                     |         |
| Alter the API?                                                  |         |
| Require attention to configuration options?                     |         |
| Fix problems installing or upgrading to a previous version?     |         |
| Introduce features?                                             |         |
| Fix bugs?                                                       |         |

## <a name="features"></a>Features

### Core CiviCRM

- **crm- Missing Summary ([13424](https://github.com/civicrm/civicrm-core/pull/13424))**

## <a name="bugs"></a>Bugs resolved

### Core CiviCRM

- **dev/financial#39: Drop checkMD5 support from Authorize.net ([13474](https://github.com/civicrm/civicrm-core/pull/13474))**

- **dev/mail#32 - Further checks - making mailing test email non-case-sensitive ([13401](https://github.com/civicrm/civicrm-core/pull/13401))**

- **dev/mail#32 - Making mailing test email non-case-sensitive ([13392](https://github.com/civicrm/civicrm-core/pull/13392))**

- **dev/mail#36 - Fix invalid unicode characters in bounce processing ([13396](https://github.com/civicrm/civicrm-core/pull/13396))**

- **dev/mail#37 - Replace non-supported 4-byte unicode characters in bounce processing ([13419](https://github.com/civicrm/civicrm-core/pull/13419))**

- **dev/core#381 - Clear session vars while retrieving the files with id a… ([542](https://github.com/civicrm/civicrm-drupal/pull/542))**

- **dev/core#434: Check If 'absolute_date' Is Used In 'prepareRepetitionEndFilter' To Prevent SQL Error ([12923](https://github.com/civicrm/civicrm-core/pull/12923))**

- **(dev/core#491) Campaign Cleanup in Activity, Member Contribution Deta… ([13382](https://github.com/civicrm/civicrm-core/pull/13382))**

- **dev/core#500 Fix user-specific Case filtering on dashboard and searches to exclude cases from inactive relationships ([13134](https://github.com/civicrm/civicrm-core/pull/13134))**

- **dev/core/issues/506, Fatal error on advance search when using cases from display results as ([13480](https://github.com/civicrm/civicrm-core/pull/13480))**

- **dev/core#527 Add in abiity to set translated text for Submit and Canc… ([13185](https://github.com/civicrm/civicrm-core/pull/13185))**

- **dev/core#561 - Convert grant task form to datepicker ([13485](https://github.com/civicrm/civicrm-core/pull/13485))**

- **dev/core#561 Convert grant search fields to use datepicker ([13211](https://github.com/civicrm/civicrm-core/pull/13211))**

- **dev/core#561 - Convert campaign form date fields ([13422](https://github.com/civicrm/civicrm-core/pull/13422))**

- **dev/core#561 - Convert activity followup form date field ([13423](https://github.com/civicrm/civicrm-core/pull/13423))**

- **dev/core#562 remove calls to dao->free() from api folder ([13393](https://github.com/civicrm/civicrm-core/pull/13393))**

- **fixes core#609 - view 'Advanced Search' links without 'view all conta… ([13390](https://github.com/civicrm/civicrm-core/pull/13390))**

- **(dev/core#635) Deprecate CRM_Core_BAO_Cache for I/O. Optionally redirect I/O to Redis or Memcache. ([13489](https://github.com/civicrm/civicrm-core/pull/13489))**

- **(dev/core#635) CRM_Utils_Cache::nack() - Fix format ([13514](https://github.com/civicrm/civicrm-core/pull/13514))**

- **(dev/core#635) Implement local array-cache for use with Redis/Memcache ([13496](https://github.com/civicrm/civicrm-core/pull/13496))**

- **(dev/core#635) Reduce unnecessary SQL writes ([13394](https://github.com/civicrm/civicrm-core/pull/13394))**

- **dev/core/issues/636 - Custom field for Address: The "No" value is not defaulted ([13397](https://github.com/civicrm/civicrm-core/pull/13397))**

- **(dev/core#644) Add in unit test showing backend able to handle user e… ([13408](https://github.com/civicrm/civicrm-core/pull/13408))**

- **core#644 - extract function to return correct mailbox header ([13407](https://github.com/civicrm/civicrm-core/pull/13407))**

- **(dev/core#646) Event date sorting doesn't work for ical listing ([13409](https://github.com/civicrm/civicrm-core/pull/13409))**

- **(dev/core#647) Fix up Test Class names and file names to ensure all t… ([13415](https://github.com/civicrm/civicrm-core/pull/13415))**

- **(dev/core#647) Fix Up Contact Selector Test by changing class name to… ([13416](https://github.com/civicrm/civicrm-core/pull/13416))**

- **(dev/core#649) DB error on Find Activities with follow up criteria ([13420](https://github.com/civicrm/civicrm-core/pull/13420))**
- **dev/core#650 Use popups for links ([13421](https://github.com/civicrm/civicrm-core/pull/13421))**

- **GitLab issue 652 Copying activity file custom data doesn't copy mime … ([13427](https://github.com/civicrm/civicrm-core/pull/13427))**

- **(WIP) dev/core#670 - Fix Saving of Case Activity tags ([13486](https://github.com/civicrm/civicrm-core/pull/13486))**

- **dev/core#676 Disable GeoCoding Tests for PR jobs and re-enable Mailin… ([13495](https://github.com/civicrm/civicrm-core/pull/13495))**

- **dev/core#677 EntityRef filters fixes ([13493](https://github.com/civicrm/civicrm-core/pull/13493))**

- **dev/core#681 - Fatal Error on submitting "Change Case Status" activit… ([13497](https://github.com/civicrm/civicrm-core/pull/13497))**

- **dev/core#682 Add basic contact filters to Summary Contributions Report ([13498](https://github.com/civicrm/civicrm-core/pull/13498))**

- **Fix for dev/core#686: Make "amount statistics" columns optional ([13507](https://github.com/civicrm/civicrm-core/pull/13507))**

- **dev/core#693 : On contact summary page, on submitting a 'New Case' form doesn't redirect to 'Manage Case' screen ([13527](https://github.com/civicrm/civicrm-core/pull/13527))**

- **core/issues/698, send correct MIME type for .jpg files ([13544](https://github.com/civicrm/civicrm-core/pull/13544))**

- **dev/core#715 - Fix delete action on RelationshipType form ([13581](https://github.com/civicrm/civicrm-core/pull/13581))**

- **Re-run gencode for fix on PriceField DAO ([13547](https://github.com/civicrm/civicrm-core/pull/13547))**

- **Donot allow to enter more than max length of the field ([13403](https://github.com/civicrm/civicrm-core/pull/13403))**

- **Respect pre hook for relationship to alter id in $params ([12834](https://github.com/civicrm/civicrm-core/pull/12834))**

- **use number widget for weight and other numeric fields in more forms ([13526](https://github.com/civicrm/civicrm-core/pull/13526))**

- **Used field name defined in DAO file for Activity Subject ([13530](https://github.com/civicrm/civicrm-core/pull/13530))**

- **Add html type for civicrm_note.privacy field ([13532](https://github.com/civicrm/civicrm-core/pull/13532))**

- **Performance fix for alternate getActivity listing function ([13522](https://github.com/civicrm/civicrm-core/pull/13522))**

- **use number widget for weight fields in all forms ([13520](https://github.com/civicrm/civicrm-core/pull/13520))**

- **l10n.js - Reload when logging in as new user ([13518](https://github.com/civicrm/civicrm-core/pull/13518))**

- **Fix shortcode button when popup setting is disabled ([13502](https://github.com/civicrm/civicrm-core/pull/13502))**

- **Allow help text to be overridden from an .extra.hlp file ([13488](https://github.com/civicrm/civicrm-core/pull/13488))**

- **Fix permission checks on contact create popups ([13506](https://github.com/civicrm/civicrm-core/pull/13506))**

- **Speed up loading of contribution tab on contacts with large number of contributions in a large database ([13512](https://github.com/civicrm/civicrm-core/pull/13512))**

- **Fix undefined throwing error in CRM.checkPerm ([13513](https://github.com/civicrm/civicrm-core/pull/13513))**

- **Add extension compatibility list ([13298](https://github.com/civicrm/civicrm-core/pull/13298))**

- **CRM/Contribute - Add query optimization for creditnote_id ([13511](https://github.com/civicrm/civicrm-core/pull/13511))**

- **Add selectWhere hook call to the query that generates the 'annual' query - the 'amount this year' on a contact dash ([13319](https://github.com/civicrm/civicrm-core/pull/13319))**

- **Display error instead of fatal error when trying to view a case that you don't have permission to access ([13505](https://github.com/civicrm/civicrm-core/pull/13505))**

- **Convert deprecated OptionGroup::getLabel to PseudoConstant::getLabel for cases ([13460](https://github.com/civicrm/civicrm-core/pull/13460))**

- **Convert Campaign widgets to entityRef ([13491](https://github.com/civicrm/civicrm-core/pull/13491))**

- **Survey form - use number widget for number fields ([13503](https://github.com/civicrm/civicrm-core/pull/13503))**

- **Fix broken date fields in survey response form ([13490](https://github.com/civicrm/civicrm-core/pull/13490))**

- **Case type management fixes ([12647](https://github.com/civicrm/civicrm-core/pull/12647))**

- **Removed '>' from comment ([13492](https://github.com/civicrm/civicrm-core/pull/13492))**

- **Fix trailing ampersands when empty array passed as query param ([13461](https://github.com/civicrm/civicrm-core/pull/13461))**

- **geocode job: Provide country_id to geocoders. ([13456](https://github.com/civicrm/civicrm-core/pull/13456))**

- **Test-drive contribution pages to the front ([13482](https://github.com/civicrm/civicrm-core/pull/13482))**

- **Simplify billingblock in Contribution/Form/Main template ([13437](https://github.com/civicrm/civicrm-core/pull/13437))**

- **C51-384: Added case tokens on Email Activity Modal ([13473](https://github.com/civicrm/civicrm-core/pull/13473))**

- **Add main nav icon for CiviCRM (Backdrop) ([13481](https://github.com/civicrm/civicrm-core/pull/13481))**

- **removed unwanted parameter from getLineItems() ([13479](https://github.com/civicrm/civicrm-core/pull/13479))**

- **Deprecate unused function ([13452](https://github.com/civicrm/civicrm-core/pull/13452))**

- **Fix order api to support a pseudoConstant for financial_type_id ([13317](https://github.com/civicrm/civicrm-core/pull/13317))**

- **Email sent from CiviCRM for a new Case and Activity does not evaluate the $activityTypeName or $manageCaseURL tokens ([13324](https://github.com/civicrm/civicrm-core/pull/13324))**

- **Convert Paypal Standard IPN payment_date to system's time zone ([13439](https://github.com/civicrm/civicrm-core/pull/13439))**

- **Remove inappropriate exception handling. ([13442](https://github.com/civicrm/civicrm-core/pull/13442))**

- **Translate untranslated string ([13466](https://github.com/civicrm/civicrm-core/pull/13466))**

- **Escape the header title & section title in reports to better support extensions ([13453](https://github.com/civicrm/civicrm-core/pull/13453))**

- **setLocale: precaution for when setLocale is called on an unilingual site ([13465](https://github.com/civicrm/civicrm-core/pull/13465))**

- **Use icon for timepicker placeholder ([13438](https://github.com/civicrm/civicrm-core/pull/13438))**

- **Fix undefined index warning ([13433](https://github.com/civicrm/civicrm-core/pull/13433))**

- **Fix activity.getcount function to filter out unpermitted activities. ([13377](https://github.com/civicrm/civicrm-core/pull/13377))**

- **Add routine for updating smartgroups, currently handling datepicker conversion ([13395](https://github.com/civicrm/civicrm-core/pull/13395))**

- **Add default for domain_id for report_instance. ([13426](https://github.com/civicrm/civicrm-core/pull/13426))**

- **PCP report - fix number of donors and total committed. ([13252](https://github.com/civicrm/civicrm-core/pull/13252))**

- **Membership custom fields sometimes don't display ([13411](https://github.com/civicrm/civicrm-core/pull/13411))**

- **Donot show delete task option on create new report ([13402](https://github.com/civicrm/civicrm-core/pull/13402))**

- **Fix bug where getsingle calls chained actions twice ([13406](https://github.com/civicrm/civicrm-core/pull/13406))**

- **Don't require CiviEvent permission to create repeating activity ([13405](https://github.com/civicrm/civicrm-core/pull/13405))**

- **Do not check financial permissions on contribution.create if check_perrmissions is FALSE. ([13318](https://github.com/civicrm/civicrm-core/pull/13318))**

- **Added support to generic settings form for sorting settings by weight. ([13345](https://github.com/civicrm/civicrm-core/pull/13345))**

- **Fix  \Civi\Token\TokenRow::customToken() failure if field is not set ([13280](https://github.com/civicrm/civicrm-core/pull/13280))**

- **Prevent \Civi\Token\TokenCompatSubscriber::evaluate() erroring when no contactId is given. ([13284](https://github.com/civicrm/civicrm-core/pull/13284))**

- **Format token custom fields with value of 0 correctly ([13282](https://github.com/civicrm/civicrm-core/pull/13282))**

- **PHP 7.1 incompatibility error fix for -> Error: Using $this when not in object context in civicrm_form_data() ([541](https://github.com/civicrm/civicrm-drupal/pull/541))**

- **Add editor config file. ([146](https://github.com/civicrm/civicrm-wordpress/pull/146))**

- **Fix shortcode button when popup setting is disabled ([145](https://github.com/civicrm/civicrm-wordpress/pull/145))**

- **Upgrade Jquery contained within KcFinder ([239](https://github.com/civicrm/civicrm-packages/pull/239))**

## <a name="misc"></a>Miscellany

- **Fix regression whereby making receive_date required breaks back offic…
  ([13572](https://github.com/civicrm/civicrm-core/pull/13572))**

- **Update 5.10.0.md
  ([13552](https://github.com/civicrm/civicrm-core/pull/13552))**

- **(NFC) Add 'schema' to \Civi\Token\TokenProcessor()
  ([13286](https://github.com/civicrm/civicrm-core/pull/13286))**

- **(NFC) Add listTokens() function to return formatted list of tokens for forms
  ([13279](https://github.com/civicrm/civicrm-core/pull/13279))**

- **(NFC) Ensure that when loading in the test data it is done with UTF8 …
  ([13413](https://github.com/civicrm/civicrm-core/pull/13413))**

- **(NFC) Add unit test of creating notes from the contact.create API
  ([13471](https://github.com/civicrm/civicrm-core/pull/13471))**

- **[tidy-up] remove a couple of useless bits of code
  ([13447](https://github.com/civicrm/civicrm-core/pull/13447))**

- **Add unit test for emailing receipts from additional payment page
  ([13455](https://github.com/civicrm/civicrm-core/pull/13455))**

- **remove duplicated call to createCreditNoteId()
  ([13509](https://github.com/civicrm/civicrm-core/pull/13509))**

- **[REF] Replace ->assign with CRM_Core_Smarty::singleton()->assign in
  preparation for making function shareable
  ([13444](https://github.com/civicrm/civicrm-core/pull/13444))**

- **[REF] Create pseudo bao CRM_Financial_BAO_Payment & move create function to
  it ([13443](https://github.com/civicrm/civicrm-core/pull/13443))**

- **REF Convert forms to standard customData template
  ([13412](https://github.com/civicrm/civicrm-core/pull/13412))**

- **REF Remove redundant function
  ([13428](https://github.com/civicrm/civicrm-core/pull/13428))**

- **(REF) Make activeTokens a class property of
  \Civi\Token\AbstractTokenSubscriber
  ([13278](https://github.com/civicrm/civicrm-core/pull/13278))**

- **REF Remove duplicate call to session singleton
  ([13458](https://github.com/civicrm/civicrm-core/pull/13458))**

- **REF Remove undefined variable when creating note
  ([13457](https://github.com/civicrm/civicrm-core/pull/13457))**

- **(REF) Add CRM_Utils_Cache::nack(). Use it for NaiveHasTrait.
  ([13500](https://github.com/civicrm/civicrm-core/pull/13500))**

## <a name="credits"></a>Credits

This release was developed by the following code authors:

AGH Strategies - Alice Frumin, Andrew Hunt; Agileware - Agileware Team, Alok Patel, Francis Whittle, Justin Freeman; Australian Greens - Seamus Lee; CEDC - Laryn Kragt Bakker; Christian Wach; Circle Interactive - Dave Jenkins; CiviCRM - Coleman Watts, Tim Otten; CiviDesk - Yashodha Chaku; CompuCorp - Debarshi Bhaumik, René Olivo, Vinu Varshith Sekar; Coop SymbioTIC - Mathieu Lutfy; Electronic Frontier Foundation - Mark Burdett; Francesc Bassas i Bullich; Fuzion - Jitendra Purohit; iXiam - Luciano Spiegel; jgillmanjr; JMA Consulting - Monish Deb; Joinery - Allen Shaw; martinh-pw; Megaphone Technology Consulting - Jon Goldberg; MillerTech - Chamil Wijesooriya; MJW Consulting - Matthew Wire; Oxfam Germany - Thomas Schüttler; pfigel; Pradeep Nayak; Progressive Technology Project - Jamie McClelland; Squiffle Consulting - Aidan Saunders; universalhandle; Wikimedia Foundation - Eileen McNaughton

Most authors also reviewed code for this release; in addition, the following
reviewers contributed their comments:

AGH Strategies - Alice Frumin, Andrew Hunt; Agileware - Justin Freeman; Australian Greens - Seamus Lee; British Humanist Association - Andrew West; CEDC - Laryn Kragt Bakker; Christian Wach; Circle Interactive - Dave Jenkins; civibot[bot]; civicrm-builder; CiviCRM - Coleman Watts, Tim Otten; CiviDesk - Nicolas Ganivet, Yashodha Chaku; Clare Marsh; CompuCorp - Debarshi Bhaumik, René Olivo, Vinu Varshith Sekar; Coop SymbioTIC - Mathieu Lutfy; Francesc Bassas i Bullich; Fuzion - Jitendra Purohit, Peter Davis; ghost; iXiam - Luciano Spiegel; jgillmanjr; JMA Consulting - Joe Murray, Monish Deb; Joinery - Allen Shaw; Lighthouse Design and Consulting - Brian Shaughnessy; martinh-pw; Megaphone Technology Consulting - Jon Goldberg; MillerTech - Chamil Wijesooriya; MJW Consulting - Matthew Wire; Oxfam Germany - Thomas Schüttler; pfigel; Pradeep Nayak; Progressive Technology Project - Jamie McClelland; Richard van Oosterhout; shitijg; Squiffle Consulting - Aidan Saunders; swastikpareek; Tadpole Collective - Kevin Cristiano; universalhandle; Wikimedia Foundation - Eileen McNaughton

## <a name="feedback"></a>Feedback

These release notes are edited by Alice Frumin and Andrew Hunt.  If you'd like
to provide feedback on them, please log in to https://chat.civicrm.org/civicrm
and contact `@agh1`.
